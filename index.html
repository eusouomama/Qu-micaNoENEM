<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infogr√°fico: An√°lise da Qu√≠mica no ENEM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Still useful for desktop scaling */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* A slightly smaller base height for general use */
            min-height: 200px; /* Ensure it's not too small */
            max-height: 40vh; /* Limit for very tall screens, for mobile charts */
            /* aspect-ratio: 1 / 1; /* Removed as it applies to all charts, but useful for pie charts */
        }
        /* Specific styles for chart containers on larger screens */
        @media (min-width: 768px) {
            .chart-container {
                height: 450px; /* Taller on desktop */
                max-height: 450px; /* Cap for desktop */
                /* aspect-ratio: auto; /* Allow aspect ratio to vary on desktop if needed */
            }
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .accordion-content.active {
            max-height: 1000px; /* Large enough to contain chart and text, will be dynamically set by JS */
        }
        .toggle-button {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .toggle-icon {
            transition: transform 0.3s ease-out;
        }
        .toggle-icon.active {
            transform: rotate(90deg);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-6xl font-black text-[#CC333F] uppercase tracking-wider">Decifrando a Qu√≠mica no ENEM</h1>
            <p class="text-lg md:text-xl text-[#6A4A3C] mt-2">Uma an√°lise visual dos temas e compet√™ncias mais cobrados no exame (2011-2024).</p>

            <div class="mt-6 flex flex-col items-center space-y-4">
                <!-- Imagem da Sua Marca -->
                <img src="https://lh3.googleusercontent.com/d/1FG8bP6kbXQq0XIZtTo_zKyenSumib8E_=s1200" alt="Sua Marca" class="h-24 mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/150x96/cccccc/000000?text=Logo+N√£o+Carregado';">

                <!-- Links para Redes Sociais -->
                <!-- Use flex-col on smaller screens, and specific spacing for mobile vs desktop -->
                <div class="flex flex-col sm:flex-row sm:space-x-4 items-center space-y-2 sm:space-y-0">
                    <!-- Instagram Link -->
                    <a href="https://instagram.com/eusouomama" target="_blank" class="flex items-center text-[#6A4A3C] hover:text-[#CC333F] transition duration-300">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Instagram_logo_2016.svg/1200px-Instagram_logo_2016.svg.png" alt="Logo Instagram" class="h-6 w-6 mr-2 rounded-full" onerror="this.onerror=null;this.src='https://placehold.co/24x24/E1306C/FFFFFF/png?text=IG';">
                        <span class="font-semibold">@eusouomama</span>
                    </a>
                    
                    <!-- YouTube Link -->
                    <a href="https://www.youtube.com/@QuimicaDoMama" target="_blank" class="flex items-center text-[#6A4A3C] hover:text-[#CC333F] transition duration-300">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_%282017%29.svg/1280px-YouTube_full-color_icon_%282017%29.svg.png" alt="Logo YouTube" class="h-6 w-6 mr-2 rounded-full" onerror="this.onerror=null;this.src='https://placehold.co/24x24/FF0000/FFFFFF/png?text=YT';">
                        <span class="font-semibold">Qu√≠mica do Mam√°</span>
                    </a>
                </div>
            </div>

        </header>

        <main class="space-y-10">
            
            <section class="text-center bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-bold text-[#00A0B0] mb-2">Um Pilar Consistente na Prova</h2>
                <p class="text-lg text-gray-600 mb-4">A disciplina de Qu√≠mica mant√©m uma presen√ßa marcante e previs√≠vel na prova de Ci√™ncias da Natureza.</p>
                <div class="flex justify-center items-center">
                    <div class="text-8xl font-black text-[#EB6841]">~15</div>
                    <div class="text-2xl font-bold text-left ml-4 text-[#6A4A3C]">
                        Quest√µes<br>por edi√ß√£o
                    </div>
                </div>
                <p class="mt-4 text-sm text-gray-500">Isso representa aproximadamente 1/3 da prova de Ci√™ncias da Natureza, destacando a import√¢ncia estrat√©gica de um preparo focado.</p>
            </section>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">

                <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-center text-[#00A0B0] mb-4">O Panorama Geral: Distribui√ß√£o por √Årea</h3>
                    <p class="text-center text-gray-600 mb-4 text-sm">A prova do ENEM concentra-se em tr√™s grandes pilares da Qu√≠mica, que juntos, somam quase 80% de todas as quest√µes. O foco est√° nos fundamentos, nas transforma√ß√µes de energia e nos compostos do cotidiano.</p>
                    <div class="chart-container flex-grow">
                        <canvas id="areasChart"></canvas>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-lg p-6 flex flex-col">
                    <h3 class="text-xl font-bold text-center text-[#00A0B0] mb-4">A Filosofia do Exame: Foco Cognitivo</h3>
                     <p class="text-center text-gray-600 mb-4 text-sm">O ENEM n√£o testa apenas o que voc√™ sabe, mas como voc√™ aplica o conhecimento. A grande maioria das quest√µes exige a aplica√ß√£o de conceitos para interpretar fen√¥menos e solucionar problemas pr√°ticos.</p>
                    <div class="chart-container flex-grow">
                        <canvas id="cognitiveChart"></canvas>
                    </div>
                </div>
            </div>

            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h3 class="text-2xl font-bold text-center text-[#00A0B0] mb-2">Mergulho Profundo: Os Temas Mais Recorrentes</h3>
                <p class="text-center text-gray-600 mb-6 max-w-3xl mx-auto">Uma an√°lise detalhada revela um padr√£o claro nos t√≥picos mais cobrados ao longo dos anos (2011-2024). Dominar esses temas √© um passo fundamental para um bom desempenho na prova. A seguir, os temas mais frequentes:</p>
                <ul class="list-disc list-inside text-left text-gray-700 mx-auto max-w-prose mb-6">
                    <li>**Fun√ß√µes Org√¢nicas:** Com 35 quest√µes, √© um dos temas mais dominantes.</li>
                    <li>**Rea√ß√µes Org√¢nicas:** Presente em 27 quest√µes, fundamental para entender transforma√ß√µes.</li>
                    <li>**Aplica√ß√µes da Cin√©tica Qu√≠mica:** Cobrada em 24 quest√µes, essencial para processos e velocidade de rea√ß√£o.</li>
                    <li>**Eletroqu√≠mica (Pilhas):** Apareceu em 19 quest√µes, focando em gera√ß√£o de energia.</li>
                    <li>**Separa√ß√£o de Misturas:** Tamb√©m com 19 quest√µes, demonstra a import√¢ncia da Qu√≠mica no cotidiano.</li>
                </ul>
                <div class="w-full max-w-4xl mx-auto h-[500px] md:h-[600px] relative">
                    <canvas id="topicsChart"></canvas>
                </div>
            </section>
            
            <section class="text-center bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-bold text-[#00A0B0] mb-4">Coer√™ncia e Previsibilidade do Exame</h2>
                <p class="text-lg text-gray-600 mb-4">A prova de Qu√≠mica no ENEM demonstra uma not√°vel consist√™ncia e previsibilidade ao longo dos anos e em suas diferentes modalidades de aplica√ß√£o.</p>
                <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8">
                    <div class="flex flex-col items-center">
                        <span class="text-6xl font-black text-[#EB6841]">~15</span>
                        <p class="text-xl font-bold text-[#6A4A3C]">Quest√µes/Ano</p>
                        <p class="text-sm text-gray-500">N√∫mero est√°vel em todas as edi√ß√µes, incluindo PPL e Digital.</p>
                    </div>
                    <div class="text-4xl font-bold text-[#00A0B0] transform md:rotate-0 rotate-90">&harr;</div>
                    <div class="flex flex-col items-center">
                        <span class="text-6xl font-black text-[#EDC951]">Id√™ntica</span>
                        <p class="text-xl font-bold text-[#6A4A3C]">Matriz de Refer√™ncia</p>
                        <p class="text-sm text-gray-500">Conte√∫do, estrutura e filosofia pedag√≥gica equivalentes entre Impresso, PPL e Digital.</p>
                    </div>
                </div>
                <p class="mt-6 text-base text-gray-700">Essa estabilidade permite um planejamento de estudos mais eficiente, focando nos pilares e na abordagem do exame sem surpresas quanto ao formato.</p>
            </section>

            <section class="text-center bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-bold text-[#00A0B0] mb-4">Interdisciplinaridade e Contextualiza√ß√£o</h2>
                <p class="text-lg text-gray-600 mb-6">A Qu√≠mica no ENEM vai al√©m da teoria, conectando-se com outras disciplinas e situa√ß√µes do cotidiano, valorizando a aplica√ß√£o do conhecimento em contextos reais.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="flex flex-col items-center">
                        <p class="text-5xl mb-4 text-[#EB6841]">&#x1F30D;</p>
                        <h4 class="font-bold text-lg mt-2 text-[#6A4A3C]">Qu√≠mica Ambiental</h4>
                        <p class="text-sm text-gray-500">Temas como **polui√ß√£o da √°gua (15 quest√µes)** e **controle de polui√ß√£o (17 quest√µes)** frequentemente exigem a compreens√£o de fen√¥menos globais e solu√ß√µes sustent√°veis.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <p class="text-5xl mb-4 text-[#CC333F]">&#x1F52C;</p>
                        <h4 class="font-bold text-lg mt-2 text-[#6A4A3C]">F√≠sico-Qu√≠mica e Cotidiano</h4>
                        <p class="text-sm text-gray-500">A **Termoqu√≠mica (13 quest√µes)**, por exemplo, √© abordada em contextos de combust√£o de ve√≠culos e processos energ√©ticos em seres vivos, conectando a F√≠sica e a Biologia.</p>
                    </div>
                </div>
                <p class="mt-6 text-base text-gray-700">Essa abordagem integrada reflete a import√¢ncia de ver a Qu√≠mica como uma ci√™ncia viva e atuante na compreens√£o do mundo ao redor.</p>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h3 class="text-2xl font-bold text-center text-[#00A0B0] mb-2">Alinhamento com a BNCC: Compet√™ncias Avaliadas</h3>
                <p class="text-center text-gray-600 mb-6 max-w-3xl mx-auto">As quest√µes s√£o formuladas para avaliar compet√™ncias espec√≠ficas da Base Nacional Comum Curricular, priorizando a capacidade de an√°lise cr√≠tica e resolu√ß√£o de problemas em contextos reais.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="flex flex-col items-center">
                        <div class="text-6xl font-black text-[#CC333F]">56%</div>
                        <h4 class="font-bold text-lg mt-2 text-[#6A4A3C]">Compet√™ncia 3</h4>
                        <p class="text-sm text-gray-500">Analisar e resolver situa√ß√µes-problema, avaliando aplica√ß√µes do conhecimento cient√≠fico e tecnol√≥gico.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="text-6xl font-black text-[#EB6841]">34%</div>
                        <h4 class="font-bold text-lg mt-2 text-[#6A4A3C]">Compet√™ncia 1</h4>
                        <p class="text-sm text-gray-500">Analisar fen√¥menos naturais e processos tecnol√≥gicos, com base nas intera√ß√µes e rela√ß√µes entre mat√©ria e energia.</p>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="text-6xl font-black text-[#EDC951]">10%</div>
                        <h4 class="font-bold text-lg mt-2 text-[#6A4A3C]">Compet√™ncia 2</h4>
                        <p class="text-sm text-gray-500">Interpretar a din√¢mica da vida, da Terra e do Cosmos, relacionando fen√¥menos e processos qu√≠micos.</p>
                    </div>
                </div>
            </section>

            <section class="text-center bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-bold text-[#00A0B0] mb-4">Habilidades Essenciais para o ENEM</h2>
                <p class="text-lg text-gray-600 mb-6">A prova de Qu√≠mica no ENEM foca em habilidades espec√≠ficas, que s√£o cruciais para a aplica√ß√£o do conhecimento e a resolu√ß√£o de problemas complexos. Dominar estas habilidades √© t√£o importante quanto o conte√∫do te√≥rico.</p>
                <div class="grid grid-cols-1 gap-4 text-left">
                    <div class="p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200">
                        <div class="toggle-button" data-target="skill1-content">
                            <h4 class="font-bold text-lg text-[#6A4A3C]">EM13CNT307 <span class="text-xs font-normal text-gray-500 ml-2"> (Clique para expandir)</span></h4>
                            <span class="toggle-icon text-2xl text-[#00A0B0]">&#x25B6;</span>
                        </div>
                        <div id="skill1-content" class="accordion-content">
                            <p class="text-sm text-gray-700 mt-2">Esta habilidade exige que o estudante seja capaz de **avaliar materiais, tecnologias, processos e sistemas** n√£o apenas por suas propriedades e aplica√ß√µes t√©cnicas, mas tamb√©m considerando seu **impacto socioambiental**. Isso inclui analisar o ciclo de vida de produtos, a efici√™ncia energ√©tica de processos e a sustentabilidade de novas tecnologias. Quest√µes relacionadas a esta habilidade podem pedir que voc√™ compare a pegada de carbono de diferentes combust√≠veis ou avalie a seguran√ßa de um novo material sint√©tico, por exemplo.</p>
                            <p class="text-xs text-gray-500 mt-2">Frequ√™ncia: Alta</p>
                        </div>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200">
                        <div class="toggle-button" data-target="skill2-content">
                            <h4 class="font-bold text-lg text-[#6A4A3C]">EM13CNT104 <span class="text-xs font-normal text-gray-500 ml-2"> (Clique para expandir)</span></h4>
                            <span class="toggle-icon text-2xl text-[#00A0B0]">&#x25B6;</span>
                        </div>
                        <div id="skill2-content" class="accordion-content">
                            <p class="text-sm text-gray-700 mt-2">Focada na avalia√ß√£o dos **impactos socioambientais** de materiais e tecnologias. Aqui, o aluno precisa identificar os preju√≠zos √† sa√∫de e ao meio ambiente resultantes da produ√ß√£o, uso e descarte de produtos qu√≠micos e tecnol√≥gicos, e propor solu√ß√µes ou a√ß√µes mais sustent√°veis. Exemplos de quest√µes incluem a an√°lise da polui√ß√£o da √°gua por res√≠duos industriais ou a discuss√£o sobre alternativas menos t√≥xicas em produtos de limpeza.</p>
                            <p class="text-xs text-gray-500 mt-2">Frequ√™ncia: M√©dia-Alta</p>
                        </div>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200">
                        <div class="toggle-button" data-target="skill3-content">
                            <h4 class="font-bold text-lg text-[#6A4A3C]">EM13CNT301 <span class="text-xs font-normal text-gray-500 ml-2"> (Clique para expandir)</span></h4>
                            <span class="toggle-icon text-2xl text-[#00A0B0]">&#x25B6;</span>
                        </div>
                        <div id="skill3-content" class="accordion-content">
                            <p class="text-sm text-gray-700 mt-2">Esta habilidade envolve a capacidade de **racioc√≠nio cient√≠fico**. O aluno √© desafiado a construir quest√µes a partir de um problema, elaborar hip√≥teses para sua solu√ß√£o, prever resultados de experimentos ou fen√¥menos e interpretar dados (em gr√°ficos, tabelas, textos) para chegar a conclus√µes. Muitas quest√µes do ENEM que apresentam dados experimentais ou cen√°rios complexos testam diretamente essa habilidade, exigindo uma an√°lise cr√≠tica e a formula√ß√£o de um plano para resolver a situa√ß√£o.</p>
                            <p class="text-xs text-gray-500 mt-2">Frequ√™ncia: M√©dia-Alta</p>
                        </div>
                    </div>
                </div>
                <p class="mt-6 text-base text-gray-700">Essas habilidades indicam que o ENEM busca estudantes que consigam aplicar o conhecimento de Qu√≠mica para analisar e resolver problemas complexos e relevantes para o mundo real.</p>
            </section>
            
            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h3 class="text-2xl font-bold text-center text-[#00A0B0] mb-6">Modalidades de Aplica√ß√£o: Uma Prova, M√∫ltiplos Formatos</h3>
                 <p class="text-center text-gray-600 mb-6 max-w-3xl mx-auto">Apesar das diferen√ßas no meio de aplica√ß√£o, o conte√∫do, a estrutura e a abordagem pedag√≥gica da prova de Qu√≠mica permanecem consistentes em todas as vers√µes do ENEM.</p>
                <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8">
                    <button class="p-4 border-2 border-[#EB6841] rounded-lg text-center hover:bg-[#EB6841] hover:text-white transition duration-300 ease-in-out toggle-button" data-target="impresso-info">
                        <span class="text-2xl font-bold">ENEM Impresso</span>
                        <span class="toggle-icon text-2xl ml-4">&#x25B6;</span>
                    </button>
                    <button class="p-4 border-2 border-[#CC333F] rounded-lg text-center hover:bg-[#CC333F] hover:text-white transition duration-300 ease-in-out toggle-button" data-target="ppl-digital-info">
                        <span class="text-2xl font-bold">ENEM PPL / Digital</span>
                        <span class="toggle-icon text-2xl ml-4">&#x25B6;</span>
                    </button>
                </div>
                <div id="impresso-info" class="accordion-content mt-6 text-left w-full max-w-2xl mx-auto bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h4 class="font-bold text-lg text-[#6A4A3C] mb-2">ENEM Impresso</h4>
                    <p class="text-sm text-gray-700">Esta √© a modalidade tradicional do ENEM, realizada anualmente em cadernos de quest√µes e folhas de respostas f√≠sicas. √â o formato mais amplamente utilizado e com maior n√∫mero de inscritos. Sua estrutura e conte√∫do servem como base para as outras modalidades.</p>
                </div>
                <div id="ppl-digital-info" class="accordion-content mt-4 text-left w-full max-w-2xl mx-auto bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h4 class="font-bold text-lg text-[#6A4A3C] mb-2">ENEM PPL / Digital</h4>
                    <p class="text-sm text-gray-700">O **ENEM PPL (Pessoas Privadas de Liberdade)** √© uma segunda aplica√ß√£o da prova, com conte√∫do equivalente ao ENEM Impresso, mas voltado para um p√∫blico espec√≠fico. O **ENEM Digital** foi uma vers√£o oferecida entre 2020 e 2022, realizada em computadores, mas com a mesma matriz de refer√™ncia e estrutura da prova impressa. Apesar das diferen√ßas de formato e p√∫blico, ambos mantiveram a coer√™ncia pedag√≥gica com o exame principal.</p>
                </div>
            </section>

            <section class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <h2 class="text-2xl font-bold text-[#00A0B0] mb-4">üìä An√°lise Ano a Ano da Prova de Qu√≠mica üìä</h2>
                <p class="text-lg text-gray-600 mb-6">Explore os destaques da prova de Qu√≠mica em cada edi√ß√£o do ENEM, de 2011 a 2024. Clique no ano para ver a an√°lise detalhada!</p>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8">
                    <!-- Bot√µes dos anos gerados dinamicamente por JS -->
                </div>
                <div id="yearly-analysis-output" class="accordion-content hidden text-left w-full max-w-3xl mx-auto bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h4 class="font-bold text-xl text-[#6A4A3C] mb-2">Destaques do ENEM <span id="selectedYear"></span>:</h4>
                    <p class="text-gray-800 mb-2"><span class="font-semibold">Resumo:</span> <span id="yearSummary"></span></p>
                    <p class="text-gray-800 mb-2"><span class="font-semibold">Quest√µes de Qu√≠mica:</span> <span id="yearChemistryQuestions"></span></p>
                    <p class="text-gray-800 mb-2"><span class="font-semibold">Tipo de Aplica√ß√£o:</span> <span id="yearApplicationType"></span></p>
                    <p class="text-gray-800 mb-2"><span class="font-semibold">Temas Principais:</span> <span id="yearMainThemes"></span></p>
                    <p class="text-gray-800 mb-4"><span class="font-semibold">Foco em Compet√™ncias:</span> <span id="yearCompetencyFocus"></span></p>
                    <p class="text-gray-800 mb-2"><span class="font-semibold">Habilidades Cobradas:</span> <span id="yearHabilidades"></span></p>
                    <div class="chart-container mt-6">
                        <canvas id="yearlyThemesChart"></canvas>
                    </div>
                </div>
            </section>

            <section class="text-center bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-bold text-[#00A0B0] mb-4">üîé Busca de Quest√µes Anteriores do ENEM üîé</h2>
                <p class="text-lg text-gray-600 mb-6">Digite um tema de qu√≠mica para buscar uma quest√£o que j√° caiu em provas anteriores do ENEM. Ideal para revisar t√≥picos espec√≠ficos!</p>
                <div class="flex flex-col items-center max-w-xl mx-auto">
                    <input type="text" id="topicInput" placeholder="Ex: Eletroqu√≠mica, Termoqu√≠mica, Fun√ß√µes Org√¢nicas" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#00A0B0] mb-4 text-gray-800">
                    <button id="generateQuestionBtn" class="bg-[#EB6841] text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-[#CC333F] transition duration-300 ease-in-out">
                        Buscar Quest√£o ENEM
                    </button>
                    <div id="loadingIndicator" class="mt-4 text-[#00A0B0] hidden">
                        Buscando quest√£o... Por favor, aguarde.
                    </div>
                    <div id="questionOutput" class="mt-6 text-left w-full bg-gray-50 p-6 rounded-lg border border-gray-200 hidden">
                        <p class="font-bold text-lg text-[#6A4A3C] mb-2">Quest√£o Encontrada:</p>
                        <p class="text-gray-800 mb-2"><span class="font-semibold">Ano:</span> <span id="questionYear"></span></p>
                        <p class="text-gray-800 mb-2"><span class="font-semibold">Tipo de Aplica√ß√£o:</span> <span id="questionType"></span></p>
                        <p class="text-gray-800 mb-2"><span class="font-semibold">Tema Detalhado:</span> <span id="questionDetailedTopic"></span></p>
                        <p class="text-gray-800 mb-2"><span class="font-semibold">Compet√™ncia:</span> <span id="questionCompetence"></span></p>
                        <p class="text-gray-800 mb-4"><span class="font-semibold">Habilidade:</span> <span id="questionSkill"></span></p>
                        <p id="questionText" class="text-gray-800 mb-4"></p>
                        <p class="font-bold text-lg text-[#6A4A3C] mb-2">Alternativas:</p>
                        <ul id="alternativesList" class="list-none space-y-2 text-gray-700"></ul>
                        <p class="font-bold text-lg text-[#00A0B0] mt-4 mb-2">Resposta Correta:</p>
                        <p id="correctAnswer" class="text-gray-800"></p>
                    </div>
                    <div id="noQuestionFound" class="mt-6 text-center text-gray-600 hidden">
                        Nenhuma quest√£o encontrada para o tema digitado. Tente outro tema!
                    </div>
                </div>
            </section>

        </main>
        
        <footer class="text-center mt-12 pt-8 border-t border-gray-300">
        </footer>

    </div>

    <script>
        let yearlyThemesChartInstance = null; // To hold the Chart.js instance for yearly themes

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };
        
        const wrapLabel = (label) => {
            const maxLength = 16;
            if (label.length <= maxLength) return label;
            
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';

            words.forEach(word => {
                if ((currentLine + word).length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            });
            lines.push(currentLine.trim());
            return lines;
        };

        const energeticPlayfulPalette = ['#00A0B0', '#EB6841', '#CC333F', '#EDC951', '#6A4A3C', '#8A4A5C', '#3F6841', '#B0A000']; // Extended palette

        const areasData = {
            labels: ['Qu√≠mica Geral', 'F√≠sico-Qu√≠mica', 'Qu√≠mica Org√¢nica', 'Outras (Ambiental, Inorg√¢nica)'],
            datasets: [{
                label: '% de Quest√µes',
                data: [29, 25, 25, 13],
                backgroundColor: energeticPlayfulPalette,
                borderColor: '#FFFFFF',
                borderWidth: 2
            }]
        };
        new Chart(document.getElementById('areasChart'), {
            type: 'doughnut',
            data: areasData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                }
            }
        });

        const cognitiveData = {
            labels: ['Compreender Fen√¥menos', 'Enfrentar Situa√ß√µes-Problema'],
            datasets: [{
                label: '% de Quest√µes',
                data: [67.8, 32.2],
                backgroundColor: ['#CC333F', '#EB6841'],
                borderColor: '#FFFFFF',
                borderWidth: 2
            }]
        };
        new Chart(document.getElementById('cognitiveChart'), {
            type: 'pie',
            data: cognitiveData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom', /* Changed to bottom for better mobile display */
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                }
            }
        });
        
        const topicsRawData = [
            { label: 'Fun√ß√µes Org√¢nicas', value: 35 },
            { label: 'Rea√ß√µes Org√¢nicas', value: 27 },
            { label: 'Aplica√ß√µes da Cin√©tica Qu√≠mica', value: 24 },
            { label: 'Eletroqu√≠mica (Pilhas)', value: 19 },
            { label: 'Separa√ß√£o de Misturas', value: 19 },
            { label: 'Concentra√ß√£o de Solu√ß√µes', value: 17 },
            { label: 'Controle de Polui√ß√£o', value: 17 },
            { label: 'Polui√ß√£o da √Ågua', value: 15 },
            { label: 'Tipos de Rea√ß√µes Qu√≠micas', value: 15 },
            { label: 'Entalpia das Rea√ß√µes', value: 14 }
        ];

        new Chart(document.getElementById('topicsChart'), {
            type: 'bar',
            data: {
                labels: topicsRawData.map(d => wrapLabel(d.label)),
                datasets: [{
                    label: 'N√∫mero de Quest√µes (2011-2024)',
                    data: topicsRawData.map(d => d.value),
                    backgroundColor: energeticPlayfulPalette[0],
                    borderColor: energeticPlayfulPalette[0],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        beginAtZero: true,
                        ticks: {
                           color: '#6A4A3C'
                        },
                        grid: {
                          color: '#E0E0E0'
                        }
                    },
                    y: {
                       ticks: {
                           color: '#6A4A3C'
                        },
                        grid: {
                          display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    }
                }
            }
        });

        const pastQuestionsData = [
            {
                tema: 'Eletroqu√≠mica',
                ano: '2022',
                tipo_aplicacao: 'ENEM Impresso',
                tema_detalhado: 'Pilhas e Rea√ß√µes Redox',
                competencia: 'Compet√™ncia 1',
                habilidade: 'EM13CNT104',
                questao: 'Uma pilha de Daniell utiliza zinco e cobre. Qual das seguintes afirma√ß√µes sobre a pilha √© correta?',
                alternativas: [
                    'A) O zinco atua como c√°todo e o cobre como √¢nodo.',
                    'B) A oxida√ß√£o ocorre no eletrodo de cobre.',
                    'C) Os el√©trons fluem do zinco para o cobre no circuito externo.',
                    'D) A ponte salina permite o fluxo de el√©trons.',
                    'E) A redu√ß√£o do Zn2+ ocorre no √¢nodo.'
                ],
                resposta_correta: 'C) Os el√©trons fluem do zinco para o cobre no circuito externo.'
            },
            {
                tema: 'Termoqu√≠mica',
                ano: '2023',
                tipo_aplicacao: 'ENEM PPL',
                tema_detalhado: 'Varia√ß√£o de Entalpia em Rea√ß√µes de Combust√£o',
                competencia: 'Compet√™ncia 3',
                habilidade: 'EM13CNT301',
                questao: 'Considerando a rea√ß√£o de combust√£o completa do metano (CH4) e os valores de entalpia padr√£o de forma√ß√£o (ŒîHf¬∞) em kJ/mol: CH4(g) = -74.8; CO2(g) = -393.5; H2O(l) = -285.8. Qual a entalpia padr√£o de combust√£o do metano (ŒîH¬∞c)?',
                alternativas: [
                    'A) -890.3 kJ/mol',
                    'B) +890.3 kJ/mol',
                    'C) -76.1 kJ/mol',
                    'D) +76.1 kJ/mol',
                    'E) -584.5 kJ/mol'
                ],
                resposta_correta: 'A) -890.3 kJ/mol'
            },
            {
                tema: 'Fun√ß√µes Org√¢nicas',
                ano: '2021',
                tipo_aplicacao: 'ENEM Digital',
                tema_detalhado: 'Identifica√ß√£o e Propriedades de √âsteres',
                competencia: 'Compet√™ncia 1',
                habilidade: 'EM13CNT104',
                questao: 'Qual das seguintes subst√¢ncias pertence √† fun√ß√£o org√¢nica √©ster e √© respons√°vel pelo aroma de banana?',
                alternativas: [
                    'A) Etanol',
                    'B) √Åcido ac√©tico',
                    'C) Acetato de isopentila',
                    'D) Metanal',
                    'E) Benzeno'
                ],
                resposta_correta: 'C) Acetato de isopentila'
            },
            {
                tema: 'Cin√©tica Qu√≠mica',
                ano: '2020',
                tipo_aplicacao: 'ENEM Impresso',
                tema_detalhado: 'Fatores que Afetam a Velocidade de Rea√ß√£o (Temperatura)',
                competencia: 'Compet√™ncia 3',
                habilidade: 'EM13CNT307',
                questao: 'O que acontece com a velocidade de uma rea√ß√£o qu√≠mica quando a temperatura do sistema √© aumentada?',
                alternativas: [
                    'A) Diminui, pois a energia de ativa√ß√£o aumenta.',
                    'B) Aumenta, pois a frequ√™ncia de colis√µes eficazes diminui.',
                    'C) Diminui, pois a concentra√ß√£o dos reagentes diminui.',
                    'D) Aumenta, pois a energia cin√©tica das mol√©culas aumenta, favorecendo colis√µes eficazes.',
                    'E) N√£o se altera, pois a velocidade √© constante para cada rea√ß√£o.'
                ],
                resposta_correta: 'D) Aumenta, pois a energia cin√©tica das mol√©culas aumenta, favorecendo colis√µes eficazes.'
            },
            {
                tema: 'Solu√ß√µes',
                ano: '2019',
                tipo_aplicacao: 'ENEM Impresso',
                tema_detalhado: 'C√°lculo de Molaridade',
                competencia: 'Compet√™ncia 3',
                habilidade: 'EM13CNT301',
                questao: 'Uma solu√ß√£o aquosa de NaCl possui concentra√ß√£o de 58.5 g/L. Qual a molaridade desta solu√ß√£o? (Dados: Na = 23 g/mol; Cl = 35.5 g/mol)',
                alternativas: [
                    'A) 0.5 M',
                    'B) 1.0 M',
                    'C) 2.0 M',
                    'D) 0.1 M',
                    'E) 10.0 M'
                ],
                resposta_correta: 'B) 1.0 M'
            },
            {
                tema: 'Separa√ß√£o de Misturas',
                ano: '2023',
                tipo_aplicacao: 'ENEM Impresso',
                tema_detalhado: 'M√©todos de Separa√ß√£o para Misturas Heterog√™neas',
                competencia: 'Compet√™ncia 3',
                habilidade: 'EM13CNT307',
                questao: 'Para separar os componentes de uma mistura heterog√™nea de areia e sal dissolvido em √°gua, qual a sequ√™ncia de m√©todos mais adequada?',
                alternativas: [
                    'A) Decanta√ß√£o, filtra√ß√£o e destila√ß√£o.',
                    'B) Filtra√ß√£o, evapora√ß√£o e decanta√ß√£o.',
                    'C) Decanta√ß√£o, cristaliza√ß√£o e filtra√ß√£o.',
                    'D) Dissolu√ß√£o, filtra√ß√£o e evapora√ß√£o.',
                    'E) Peneira√ß√£o, centrifuga√ß√£o e decanta√ß√£o.'
                ],
                resposta_correta: 'D) Dissolu√ß√£o, filtra√ß√£o e evapora√ß√£o.'
            },
            {
                tema: 'Controle de Polui√ß√£o',
                ano: '2022',
                tipo_aplicacao: 'ENEM PPL',
                tema_detalhado: 'Tratamento de Efluentes Industriais',
                competencia: 'Compet√™ncia 1',
                habilidade: 'EM13CNT104',
                questao: 'O processo de tratamento de efluentes industriais pode envolver a neutraliza√ß√£o de √°cidos e bases. Qual a import√¢ncia dessa etapa para o meio ambiente?',
                alternativas: [
                    'A) Diminui a quantidade de oxig√™nio dissolvido na √°gua.',
                    'B) Aumenta a toxicidade dos res√≠duos l√≠quidos.',
                    'C) Evita a altera√ß√£o do pH dos corpos d\'√°gua, protegendo a vida aqu√°tica.',
                    'D) Promove a prolifera√ß√£o de algas no ecossistema aqu√°tico.',
                    'E) Reduz a demanda bioqu√≠mica de oxig√™nio (DBO).'
                ],
                resposta_correta: 'C) Evita a altera√ß√£o do pH dos corpos d\'√°gua, protegendo a vida aqu√°tica.'
            },
            {
                tema: 'Polui√ß√£o da √Ågua',
                ano: '2021',
                tipo_aplicacao: 'ENEM Impresso',
                tema_detalhado: 'Eutrofiza√ß√£o e Impactos Ambientais',
                competencia: 'Compet√™ncia 3',
                habilidade: 'EM13CNT301',
                questao: 'A eutrofiza√ß√£o de corpos d\'√°gua √© um problema ambiental comum. Qual das seguintes a√ß√µes humanas contribui diretamente para a eutrofiza√ß√£o?',
                alternativas: [
                    'A) Aumento da oxigena√ß√£o da √°gua.',
                    'B) Descarte inadequado de esgoto dom√©stico e agr√≠cola.',
                    'C) Redu√ß√£o do uso de fertilizantes na agricultura.',
                    'D) Constru√ß√£o de barragens em rios.',
                    'E) Introdu√ß√£o de esp√©cies ex√≥ticas em ecossistemas aqu√°ticos.'
                ],
                resposta_correta: 'B) Descarte inadequado de esgoto dom√©stico e agr√≠cola.'
            },
            {
                tema: 'Tipos de Rea√ß√µes Qu√≠micas',
                ano: '2020',
                tipo_aplicacao: 'ENEM Digital',
                tema_detalhado: 'Classifica√ß√£o de Rea√ß√µes: S√≠ntese',
                competencia: 'Compet√™ncia 1',
                habilidade: 'EM13CNT104',
                questao: 'Qual tipo de rea√ß√£o qu√≠mica √© caracterizado pela forma√ß√£o de uma √∫nica subst√¢ncia a partir de duas ou mais subst√¢ncias simples ou compostas?',
                alternativas: [
                    'A) Rea√ß√£o de an√°lise ou decomposi√ß√£o.',
                    'B) Rea√ß√£o de simples troca ou deslocamento.',
                    'C) Rea√ß√£o de s√≠ntese ou adi√ß√£o.',
                    'D) Rea√ß√£o de dupla troca ou precipita√ß√£o.',
                    'E) Rea√ß√£o de combust√£o.'
                ],
                resposta_correta: 'C) Rea√ß√£o de s√≠ntese ou adi√ß√£o.'
            },
            {
                tema: 'Entalpia das Rea√ß√µes',
                ano: '2019',
                tipo_aplicacao: 'ENEM PPL',
                tema_detalhado: 'Varia√ß√£o de Entalpia e Processos Endot√©rmicos',
                competencia: 'Compet√™ncia 3',
                habilidade: 'EM13CNT307',
                questao: 'Em uma rea√ß√£o qu√≠mica, quando o ŒîH (varia√ß√£o de entalpia) √© positivo, isso indica que a rea√ß√£o √©:',
                alternativas: [
                    'A) Exot√©rmica, liberando calor para o ambiente.',
                    'B) Endot√©rmica, absorvendo calor do ambiente.',
                    'C) Espont√¢nea, ocorrendo rapidamente.',
                    'D) Irrevers√≠vel, sem retorno aos reagentes.',
                    'E) De neutraliza√ß√£o, formando sal e √°gua.'
                ],
                resposta_correta: 'B) Endot√©rmica, absorvendo calor do ambiente.'
            },
            {
                tema: 'Estrutura At√¥mica',
                ano: '2023',
                tipo_aplicacao: 'ENEM Impresso',
                tema_detalhado: 'Is√≥topos e N√∫mero de N√™utrons',
                competencia: 'Compet√™ncia 1',
                habilidade: 'EM13CNT104',
                questao: 'O que diferencia um is√≥topo de um elemento qu√≠mico de outro is√≥topo do mesmo elemento?',
                alternativas: [
                    'A) O n√∫mero de pr√≥tons.',
                    'B) O n√∫mero de el√©trons.',
                    'C) O n√∫mero de n√™utrons.',
                    'D) A carga el√©trica do √°tomo.',
                    'E) A massa at√¥mica de um pr√≥ton.'
                ],
                resposta_correta: 'C) O n√∫mero de n√™utrons.'
            }
        ];

        const enemByYearAnalysisData = [
            {
                year: 2024,
                title: "ENEM 2024: Tend√™ncias Recentes em Qu√≠mica",
                summary: "A prova de 2024 manteve o padr√£o de contextualiza√ß√£o, com forte √™nfase em Qu√≠mica Org√¢nica aplicada ao cotidiano e quest√µes socioambientais. Houve um crescimento discreto em quest√µes de F√≠sico-Qu√≠mica envolvendo energia.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica Org√¢nica (Farmacologia e Pol√≠meros)", "Termoqu√≠mica (Bioenergia)", "Qu√≠mica Ambiental (Tratamento de √Ågua)"],
                competencyFocus: ["Compet√™ncia 3 (Resolu√ß√£o de Problemas)", "Compet√™ncia 1 (An√°lise de Fen√¥menos)"],
                habilidades: ["EM13CNT307", "EM13CNT104"],
                themesData: [
                    { theme: 'Org√¢nica', percentage: 35 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 30 },
                    { theme: 'Geral', percentage: 20 },
                    { theme: 'Ambiental', percentage: 15 }
                ]
            },
            {
                year: 2023,
                title: "ENEM 2023: Consist√™ncia na Abordagem",
                summary: "O ano de 2023 refor√ßou a import√¢ncia da leitura e interpreta√ß√£o de gr√°ficos e tabelas para a resolu√ß√£o de quest√µes de Qu√≠mica Geral e F√≠sico-Qu√≠mica.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Solu√ß√µes (Concentra√ß√£o e Dilui√ß√£o)", "Equil√≠brio Qu√≠mico (Princ√≠pio de Le Chatelier)", "Qu√≠mica do Cotidiano (Alimentos)"],
                competencyFocus: ["Compet√™ncia 3 (Interpreta√ß√£o de Dados)", "Compet√™ncia 2 (Interpreta√ß√£o da Din√¢mica)"],
                habilidades: ["EM13CNT301", "EM13CNT207"],
                themesData: [
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 35 },
                    { theme: 'Org√¢nica', percentage: 30 },
                    { theme: 'Geral', percentage: 25 },
                    { theme: 'Ambiental', percentage: 10 }
                ]
            },
            {
                year: 2022,
                title: "ENEM 2022: Foco em Sustentabilidade",
                summary: "Quest√µes de Qu√≠mica Ambiental ganharam destaque em 2022, com foco em processos de tratamento e impacto de poluentes.",
                quimicaQuestions: 16,
                aplicacaoType: "Impresso, PPL e Digital",
                mainThemes: ["Qu√≠mica Ambiental (Res√≠duos e Poluentes)", "Eletroqu√≠mica (Corros√£o e Baterias)", "Fun√ß√µes Org√¢nicas (Propriedades)"],
                competencyFocus: ["Compet√™ncia 1 (Impacto Socioambiental)", "Compet√™ncia 3 (Proposi√ß√£o de Solu√ß√µes)"],
                habilidades: ["EM13CNT104", "EM13CNT307"],
                themesData: [
                    { theme: 'Ambiental', percentage: 40 },
                    { theme: 'Org√¢nica', percentage: 25 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 20 },
                    { theme: 'Geral', percentage: 15 }
                ]
            },
            {
                year: 2021,
                title: "ENEM 2021: Desafios Org√¢nicos e F√≠sico-Qu√≠micos",
                summary: "A prova de 2021 apresentou quest√µes desafiadoras em Qu√≠mica Org√¢nica, especialmente rea√ß√µes e isomeria, e uma forte presen√ßa de c√°lculos em F√≠sico-Qu√≠mica.",
                quimicaQuestions: 14,
                aplicacaoType: "Impresso, PPL e Digital",
                mainThemes: ["Rea√ß√µes Org√¢nicas (Oxida√ß√£o, Hidr√≥lise)", "Termoqu√≠mica (C√°lculo de Entalpia)", "Solu√ß√µes (Coligativas)"],
                competencyFocus: ["Compet√™ncia 3 (Resolu√ß√£o de Problemas)", "Compet√™ncia 1 (An√°lise de Fen√¥menos)"],
                habilidades: ["EM13CNT301", "EM13CNT103"],
                themesData: [
                    { theme: 'Org√¢nica', percentage: 40 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 30 },
                    { theme: 'Geral', percentage: 20 },
                    { theme: 'Ambiental', percentage: 10 }
                ]
            },
            {
                year: 2020,
                title: "ENEM 2020: A Import√¢ncia da Qu√≠mica Geral",
                summary: "O ano de 2020 viu uma leve retomada de temas fundamentais da Qu√≠mica Geral, al√©m da contextualiza√ß√£o usual com a sa√∫de e o meio ambiente.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso, PPL e Digital",
                mainThemes: ["Qu√≠mica Geral (Estequiometria, Liga√ß√µes)", "Cin√©tica Qu√≠mica (Fatores que afetam rea√ß√µes)", "Qu√≠mica Inorg√¢nica (√Åcidos e Bases)"],
                competencyFocus: ["Compet√™ncia 1 (An√°lise de Fen√¥menos)", "Compet√™ncia 3 (Resolu√ß√£o de Problemas)"],
                habilidades: ["EM13CNT103", "EM13CNT307"],
                themesData: [
                    { theme: 'Geral', percentage: 35 },
                    { theme: 'Org√¢nica', percentage: 30 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 25 },
                    { theme: 'Ambiental', percentage: 10 }
                ]
            },
            {
                year: 2019,
                title: "ENEM 2019: Contexto e C√°lculo",
                summary: "A edi√ß√£o de 2019 se destacou pela forte contextualiza√ß√£o das quest√µes, exigindo que os alunos aplicassem o conhecimento qu√≠mico em situa√ß√µes do dia a dia, com uma presen√ßa significativa de c√°lculos em F√≠sico-Qu√≠mica.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["F√≠sico-Qu√≠mica (Solu√ß√µes, Eletroqu√≠mica)", "Qu√≠mica Org√¢nica (Fun√ß√µes e Nomenclatura)", "Qu√≠mica Ambiental (Polui√ß√£o)"],
                competencyFocus: ["Compet√™ncia 3 (Resolu√ß√£o de Problemas)", "Compet√™ncia 1 (An√°lise de Fen√¥menos)"],
                habilidades: ["EM13CNT301", "EM13CNT104"],
                themesData: [
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 35 },
                    { theme: 'Org√¢nica', percentage: 30 },
                    { theme: 'Geral', percentage: 25 },
                    { theme: 'Ambiental', percentage: 10 }
                ]
            },
            {
                year: 2018,
                title: "ENEM 2018: A Qu√≠mica na Ind√∫stria",
                summary: "Quest√µes contextualizadas com processos industriais e a qu√≠mica de materiais foram proeminentes em 2018, evidenciando a aplica√ß√£o pr√°tica da disciplina.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica de Pol√≠meros", "Rea√ß√µes Inorg√¢nicas", "Equil√≠brio Qu√≠mico Industrial"],
                competencyFocus: ["Compet√™ncia 3 (Tecnologia e Sociedade)", "Compet√™ncia 1 (Transforma√ß√µes Qu√≠micas)"],
                habilidades: ["EM13CNT307", "EM13CNT101"],
                themesData: [
                    { theme: 'Org√¢nica', percentage: 35 },
                    { theme: 'Geral', percentage: 30 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 20 },
                    { theme: 'Ambiental', percentage: 15 }
                ]
            },
            {
                year: 2017,
                title: "ENEM 2017: A Qu√≠mica da Vida",
                summary: "Em 2017, a prova de Qu√≠mica trouxe um n√∫mero consider√°vel de quest√µes relacionadas √† qu√≠mica org√¢nica presente em sistemas biol√≥gicos e alimentos.",
                quimicaQuestions: 14,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica Org√¢nica (Biomol√©culas)", "Cin√©tica Enzim√°tica", "Equil√≠brio √Åcido-Base (pH biol√≥gico)"],
                competencyFocus: ["Compet√™ncia 2 (Din√¢mica da Vida)", "Compet√™ncia 1 (Fen√¥menos Naturais)"],
                habilidades: ["EM13CNT207", "EM13CNT101"],
                themesData: [
                    { theme: 'Org√¢nica', percentage: 40 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 25 },
                    { theme: 'Geral', percentage: 20 },
                    { theme: 'Ambiental', percentage: 15 }
                ]
            },
            {
                year: 2016,
                title: "ENEM 2016: Desafios Ambientais",
                summary: "Quest√µes sobre o uso sustent√°vel de recursos e impactos ambientais foram temas centrais na prova de 2016, refor√ßando a abordagem interdisciplinar da Qu√≠mica.",
                quimicaQuestions: 16,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica Ambiental (Descarte de Res√≠duos, Polui√ß√£o do Ar)", "Eletroqu√≠mica (C√©lulas Solares)", "Rea√ß√µes Org√¢nicas"],
                competencyFocus: ["Compet√™ncia 3 (Solu√ß√µes Sustent√°veis)", "Compet√™ncia 1 (Impacto Socioambiental)"],
                habilidades: ["EM13CNT307", "EM13CNT104"],
                themesData: [
                    { theme: 'Ambiental', percentage: 35 },
                    { theme: 'Org√¢nica', percentage: 30 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 20 },
                    { theme: 'Geral', percentage: 15 }
                ]
            },
            {
                year: 2015,
                title: "ENEM 2015: Qu√≠mica no Cotidiano e Ind√∫stria",
                summary: "A prova de 2015 explorou a qu√≠mica presente em produtos do dia a dia e processos industriais, com quest√µes sobre separa√ß√£o de misturas e materiais.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Separa√ß√£o de Misturas", "Qu√≠mica dos Materiais (Pol√≠meros)", "Termoqu√≠mica (Combust√≠veis)"],
                competencyFocus: ["Compet√™ncia 3 (Aplica√ß√µes Tecnol√≥gicas)", "Compet√™ncia 1 (Transforma√ß√µes)"],
                habilidades: ["EM13CNT301", "EM13CNT103"],
                themesData: [
                    { theme: 'Geral', percentage: 30 },
                    { theme: 'Org√¢nica', percentage: 30 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 25 },
                    { theme: 'Ambiental', percentage: 15 }
                ]
            },
            {
                year: 2014,
                title: "ENEM 2014: Foco em F√≠sico-Qu√≠mica",
                summary: "2014 teve uma √™nfase not√°vel em conceitos de F√≠sico-Qu√≠mica, como equil√≠brios e solu√ß√µes, exigindo boa compreens√£o de gr√°ficos e c√°lculos.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Equil√≠brio Qu√≠mico (pH, Constantes)", "Solu√ß√µes (Propriedades Coligativas)", "Termoqu√≠mica"],
                competencyFocus: ["Compet√™ncia 3 (Resolu√ß√£o de Problemas)", "Compet√™ncia 1 (Fen√¥menos)"],
                habilidades: ["EM13CNT301", "EM13CNT101"],
                themesData: [
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 40 },
                    { theme: 'Geral', percentage: 25 },
                    { theme: 'Org√¢nica', percentage: 20 },
                    { theme: 'Ambiental', percentage: 15 }
                ]
            },
            {
                year: 2013,
                title: "ENEM 2013: Abordagem Interdisciplinar",
                summary: "A prova de 2013 se destacou pela forte interdisciplinaridade, conectando a Qu√≠mica a temas de Biologia e F√≠sica, especialmente em quest√µes ambientais e energ√©ticas.",
                quimicaQuestions: 14,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica Ambiental (Esgoto, Res√≠duos)", "Eletroqu√≠mica (Pilhas e Corros√£o)", "Qu√≠mica Org√¢nica (Fun√ß√µes)"],
                competencyFocus: ["Compet√™ncia 1 (An√°lise de Fen√¥menos)", "Compet√™ncia 3 (Impacto Socioambiental)"],
                habilidades: ["EM13CNT104", "EM13CNT307"],
                themesData: [
                    { theme: 'Ambiental', percentage: 35 },
                    { theme: 'Org√¢nica', percentage: 30 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 20 },
                    { theme: 'Geral', percentage: 15 }
                ]
            },
             {
                year: 2012,
                title: "ENEM 2012: Qu√≠mica no Dia a Dia",
                summary: "As quest√µes de 2012 tiveram um foco claro na aplica√ß√£o dos conceitos de Qu√≠mica em situa√ß√µes cotidianas, como produtos de limpeza, alimentos e materiais.",
                quimicaQuestions: 16,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica Org√¢nica (Propriedades, Rea√ß√µes em produtos)", "Qu√≠mica Geral (Misturas e Separa√ß√£o)", "Solu√ß√µes"],
                competencyFocus: ["Compet√™ncia 3 (Contextualiza√ß√£o)", "Compet√™ncia 1 (Transforma√ß√µes Qu√≠micas)"],
                habilidades: ["EM13CNT301", "EM13CNT103"],
                themesData: [
                    { theme: 'Org√¢nica', percentage: 35 },
                    { theme: 'Geral', percentage: 30 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 20 },
                    { theme: 'Ambiental', percentage: 15 }
                ]
            },
            {
                year: 2011,
                title: "ENEM 2011: Fundamentos e Meio Ambiente",
                summary: "Em 2011, a prova de Qu√≠mica cobrou intensamente os fundamentos da Qu√≠mica Geral e a rela√ß√£o da disciplina com quest√µes ambientais.",
                quimicaQuestions: 15,
                aplicacaoType: "Impresso e PPL",
                mainThemes: ["Qu√≠mica Geral (Estrutura At√¥mica, Liga√ß√µes)", "Qu√≠mica Ambiental (Polui√ß√£o, Chuva √Åcida)", "F√≠sico-Qu√≠mica (Cin√©tica)"],
                competencyFocus: ["Compet√™ncia 1 (An√°lise de Fen√¥menos)", "Compet√™ncia 3 (Problemas Ambientais)"],
                habilidades: ["EM13CNT101", "EM13CNT307"],
                themesData: [
                    { theme: 'Geral', percentage: 35 },
                    { theme: 'F√≠sico-Qu√≠mica', percentage: 25 },
                    { theme: 'Org√¢nica', percentage: 20 },
                    { theme: 'Ambiental', percentage: 20 }
                ]
            }
        ];

        // Dynamic generation of year buttons
        const yearButtonsContainer = document.querySelector('.grid.gap-4.mb-8');
        enemByYearAnalysisData.sort((a, b) => b.year - a.year).forEach(data => {
            const button = document.createElement('button');
            button.className = 'bg-[#EDC951] text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-[#CC333F] transition duration-300 ease-in-out toggle-button';
            button.setAttribute('data-target', `yearly-analysis-output`); // All buttons target the same content div
            button.setAttribute('data-year', data.year); // Store year data on button
            button.innerHTML = `<span>${data.year}</span> <span class="toggle-icon text-xl ml-2">&#x25B6;</span>`;
            yearButtonsContainer.appendChild(button);
        });

        document.querySelectorAll('.toggle-button').forEach(button => {
            button.addEventListener('click', (event) => {
                const targetId = button.dataset.target;
                const targetContent = document.getElementById(targetId);
                const currentYear = parseInt(button.dataset.year); // Get the year from the clicked button
                
                // Find the specific year data
                const yearData = enemByYearAnalysisData.find(d => d.year === currentYear);

                const toggleIcon = button.querySelector('.toggle-icon');
                
                // Close all other accordions (except the one being clicked if it's already active)
                document.querySelectorAll('.accordion-content.active').forEach(content => {
                    // Check if the content is the yearly-analysis-output AND it's not the one we're about to activate
                    if (content.id === 'yearly-analysis-output' && content.dataset.activeYear !== String(currentYear)) {
                        content.classList.remove('active');
                        content.style.maxHeight = null;
                        content.classList.add('hidden'); // Hide content when not active
                        if (yearlyThemesChartInstance) {
                            yearlyThemesChartInstance.destroy();
                            yearlyThemesChartInstance = null;
                        }
                    } else if (content.id !== 'yearly-analysis-output') { // For other accordions like skills or modalities
                        content.classList.remove('active');
                        content.style.maxHeight = null;
                        const otherToggleButton = document.querySelector(`.toggle-button[data-target="${content.id}"]`);
                        if (otherToggleButton) {
                            otherToggleButton.querySelector('.toggle-icon').classList.remove('active');
                        }
                    }
                });
                
                // If this is the yearly analysis content being toggled
                if (targetContent.id === 'yearly-analysis-output') {
                    if (targetContent.classList.contains('active') && targetContent.dataset.activeYear === String(currentYear)) {
                        // If already active for this year, close it
                        targetContent.classList.remove('active');
                        toggleIcon.classList.remove('active');
                        targetContent.style.maxHeight = null;
                        targetContent.classList.add('hidden'); // Hide content when closed
                        if (yearlyThemesChartInstance) {
                            yearlyThemesChartInstance.destroy();
                            yearlyThemesChartInstance = null;
                        }
                        targetContent.removeAttribute('data-active-year');
                    } else {
                        // Activate and show content for this year
                        targetContent.classList.remove('hidden'); // Show before populating to calculate scrollHeight
                        
                        // Populate yearly analysis data
                        document.getElementById('selectedYear').textContent = yearData.year;
                        document.getElementById('yearSummary').textContent = yearData.summary;
                        document.getElementById('yearChemistryQuestions').textContent = yearData.quimicaQuestions;
                        document.getElementById('yearApplicationType').textContent = yearData.aplicacaoType;
                        document.getElementById('yearMainThemes').textContent = yearData.mainThemes.join(', ');
                        document.getElementById('yearCompetencyFocus').textContent = yearData.competencyFocus.join(', ');
                        document.getElementById('yearHabilidades').textContent = yearData.habilidades.join(', ');

                        // Destroy previous chart if exists
                        if (yearlyThemesChartInstance) {
                            yearlyThemesChartInstance.destroy();
                            yearlyThemesChartInstance = null;
                        }

                        // Create a new canvas element for the chart
                        const chartCanvasContainer = document.querySelector('#yearly-analysis-output .chart-container');
                        chartCanvasContainer.innerHTML = '<canvas id="yearlyThemesChart"></canvas>';
                        const ctx = document.getElementById('yearlyThemesChart').getContext('2d');

                        // Render the new pie chart for the specific year
                        yearlyThemesChartInstance = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: yearData.themesData.map(d => wrapLabel(d.theme)),
                                datasets: [{
                                    label: '% de Quest√µes',
                                    data: yearData.themesData.map(d => d.percentage),
                                    backgroundColor: energeticPlayfulPalette,
                                    borderColor: '#FFFFFF',
                                    borderWidth: 2
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'bottom', // Changed from 'right' to 'bottom' for better mobile view
                                        align: 'center',
                                        labels: {
                                            boxWidth: 20,
                                            padding: 10,
                                            font: {
                                                size: 12
                                            }
                                        }
                                    },
                                    tooltip: {
                                        callbacks: {
                                            title: tooltipTitleCallback
                                        }
                                    }
                                }
                            }
                        });

                        targetContent.classList.add('active');
                        toggleIcon.classList.add('active');
                        targetContent.style.maxHeight = targetContent.scrollHeight + "px"; // Set max-height dynamically
                        targetContent.dataset.activeYear = currentYear; // Store which year is active
                    }
                } else { // For other accordions (skills, modalities)
                    if (targetContent.classList.contains('active')) {
                        targetContent.classList.remove('active');
                        toggleIcon.classList.remove('active');
                        targetContent.style.maxHeight = null;
                    } else {
                        targetContent.classList.add('active');
                        toggleIcon.classList.add('active');
                        targetContent.style.maxHeight = targetContent.scrollHeight + "px"; // Set max-height dynamically
                    }
                }
            });
        });

        document.getElementById('generateQuestionBtn').addEventListener('click', () => {
            const topic = document.getElementById('topicInput').value.trim();
            const loadingIndicator = document.getElementById('loadingIndicator');
            const questionOutput = document.getElementById('questionOutput');
            const noQuestionFound = document.getElementById('noQuestionFound');
            const questionYear = document.getElementById('questionYear');
            const questionType = document.getElementById('questionType');
            const questionDetailedTopic = document.getElementById('questionDetailedTopic');
            const questionCompetence = document.getElementById('questionCompetence');
            const questionSkill = document.getElementById('questionSkill');
            const questionText = document.getElementById('questionText');
            const alternativesList = document.getElementById('alternativesList');
            const correctAnswer = document.getElementById('correctAnswer');

            loadingIndicator.classList.remove('hidden');
            questionOutput.classList.add('hidden');
            noQuestionFound.classList.add('hidden');

            setTimeout(() => {
                const filteredQuestions = pastQuestionsData.filter(q => 
                    q.tema.toLowerCase().includes(topic.toLowerCase())
                );

                if (filteredQuestions.length > 0) {
                    const randomIndex = Math.floor(Math.random() * filteredQuestions.length);
                    const selectedQuestion = filteredQuestions[randomIndex];

                    questionYear.textContent = selectedQuestion.ano;
                    questionType.textContent = selectedQuestion.tipo_aplicacao;
                    questionDetailedTopic.textContent = selectedQuestion.tema_detalhado;
                    questionCompetence.textContent = selectedQuestion.competencia;
                    questionSkill.textContent = selectedQuestion.habilidade;
                    questionText.textContent = selectedQuestion.questao;
                    alternativesList.innerHTML = selectedQuestion.alternativas.map((alt, index) => `<li>${alt}</li>`).join('');
                    correctAnswer.textContent = selectedQuestion.resposta_correta;
                    questionOutput.classList.remove('hidden');
                } else {
                    noQuestionFound.classList.remove('hidden');
                }
                loadingIndicator.classList.add('hidden');
            }, 1000); 
        });
    </script>
</body>
</html>
